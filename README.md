# Example Operators repository for FlowUI
To be used by FlowUI, an Operators repository should be structured in the following way:
```
/dependencies
/operators
config.toml
```

# Operators
The `/operators` folder should contain your customized Operators. Each Operator should follow a standard organization and contain certain information to be able to be found and used by your deployed FlowUI instance. Example:
```
/operators
..../ExampleOperator
......../metadata.json
......../models.py
......../operator.py
```
<br>

## metadata.json
The simplest `metadata.json` file should contain basic metadata related to the Operator ans also optional style configurations for the UI node. Example:
```
{
    "name": "ExampleOperator"
    "version": "0.1.0"
    "dependency": {
        "requirements_file": "requirements_1.txt"
    },
    "style": {**style_args}
}
```
<br>

## models.py
Contains the Pydantic models which defines the the input and output arguments types for the Operator. Example:
```
from pydantic import BaseModel, Field


class InputModel(BaseModel):
    """Example Operator"""

    in_argument_1: float = Field(
        default=1.,
        description="an argument of numeric type with default value",
    )
    in_argument_2: str = Field(
        description="a required argument of string type"
    )
    in_argument_3: bool = Field(
        description="a required argument of boolean type"
    )


class OutputModel(BaseModel):
    """Example Operator"""

    out_argument_1: str = Field(
        description="an argument of string type"
    )
```
<br>

## operator.py
Contains the logic to run your custom code. The Operator you're writing comes here, and it should inherit from FlowUI `BaseOperator`. Example:
```
from flowui.base_operator import BaseOperator
from .models import InputModel, OutputModel


class ExampleOperator(BaseOperator):

    def operator_function(self, input_model: InputModel):
        # Your custom function code comes here
        ...

        return OutputModel(out_argument_1="a string result")
```
<br>


# Dependencies
The `/dependencies` folder should contain all the `requirements.txt` and `Dockerfile` files that were defined as dependencies to your custom Operators. Example:

```
/dependencies
..../Dockerfile_1
..../requirements_1.txt
..../requirements_2.txt
```

<br>

# Configuration file
The `config.toml` file stores the configuration variables for the Operators repository.

<br>

# Files automatically generated by FlowUI
When using FlowUI convenience CLI function `flowui organize`, or pushing changes to the master branch of an Operators repository (and activating a Github Action workflow), some files will be automatically created or modified for you:
- A `dependencies_map.json` file will be created at `/.flowui/`
- A `compiled_metadata.json` file will be created at `/.flowui/`

Those files are essencial for the Operators repository to be properly used in FlowUI.
